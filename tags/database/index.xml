<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Database on 树深时间录</title><link>https://isshe.site/tags/database/</link><description>Recent content in Database on 树深时间录</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Wed, 01 Feb 2023 06:00:04 -0400</lastBuildDate><atom:link href="https://isshe.site/tags/database/index.xml" rel="self" type="application/rss+xml"/><item><title>数据库 —— Postgresql 慢查询分析</title><link>https://isshe.site/p/%E6%95%B0%E6%8D%AE%E5%BA%93-postgresql-%E6%85%A2%E6%9F%A5%E8%AF%A2%E5%88%86%E6%9E%90/</link><pubDate>Wed, 01 Feb 2023 06:00:04 -0400</pubDate><guid>https://isshe.site/p/%E6%95%B0%E6%8D%AE%E5%BA%93-postgresql-%E6%85%A2%E6%9F%A5%E8%AF%A2%E5%88%86%E6%9E%90/</guid><description>Postgresql 慢查询语句记录与分析 1. 记录 postgresql 以 12 版本为例
我们需要先打开 postgresql 的慢查询日志，此为前置条件，先记录下我们时间较长的查询。
编辑配置文件：/var/postgres12/data/postgresql.conf #log_min_duration_statement = -1 # -1 is disabled, 0 logs all statements # and their durations, &amp;gt; 0 logs only # statements running at least this number # of milliseconds 修改 -1 为 200，表示大于等于 200 毫秒的操作将被记录到日志。
重载配置 /path/to/pg_ctl reload -D /path/to/pgdata 2. 获取慢查询语句 2.1 切 postgresql 超户 sudo su - postgres 2.2 获取慢查询语句 打开日志文件 less /path/to/pg_log/postgresql.</description></item></channel></rss>