<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>经典案例 on 树深时间录</title><link>https://isshe.site/tags/%E7%BB%8F%E5%85%B8%E6%A1%88%E4%BE%8B/</link><description>Recent content in 经典案例 on 树深时间录</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Mon, 09 Dec 2024 06:00:00 +0800</lastBuildDate><atom:link href="https://isshe.site/tags/%E7%BB%8F%E5%85%B8%E6%A1%88%E4%BE%8B/index.xml" rel="self" type="application/rss+xml"/><item><title>经典案例（网络）- TCP 重置</title><link>https://isshe.site/p/%E7%BB%8F%E5%85%B8%E6%A1%88%E4%BE%8B%E7%BD%91%E7%BB%9C-tcp-%E9%87%8D%E7%BD%AE/</link><pubDate>Mon, 09 Dec 2024 06:00:00 +0800</pubDate><guid>https://isshe.site/p/%E7%BB%8F%E5%85%B8%E6%A1%88%E4%BE%8B%E7%BD%91%E7%BB%9C-tcp-%E9%87%8D%E7%BD%AE/</guid><description>TCP 连接被重置（Reset）分析 TODO：以下简略版，后续补充完整的案例/步骤。
strace 方案 使用 strace 确认是否提前关闭 socket。注意 trace 不仅要 network 还要 close.
goal all { run { $ timeout 60 strace -tt -f -e trace=network,close -p 50795, nop; } } stap 查看应用层调用栈 _probe _stap_probe(&amp;quot;syscall.close&amp;quot;) { int fd = _stap_long(&amp;quot;fd&amp;quot;); _str sock = _stap_call_str_func(&amp;quot;describe_fd&amp;quot;, fd); printf(&amp;quot;%s %ld\n&amp;quot;, sock, _now_ms()); _str bt = _sym_ubt(_ubt()); printf(&amp;quot;%s&amp;quot;, bt); } stap 查看内核调用栈 https://access.redhat.com/solutions/1570493
# reset-monitor.stap begins here # # usage : stap --all-modules reset-monitor.</description></item></channel></rss>